<!doctype html><html lang=fr-fr dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Un miroir intelligent"><title>Mirint</title><link rel=canonical href=https://nicolasguilloux.eu/articles/mirint-v1/><link rel=stylesheet href=/scss/style.min.6760094bd46d013bb79d4a88a84ba4cad7d0e7f530a7329fa7f7d8e712539c70.css><meta property="og:title" content="Mirint"><meta property="og:description" content="Un miroir intelligent"><meta property="og:url" content="https://nicolasguilloux.eu/articles/mirint-v1/"><meta property="og:site_name" content="Nicolas Guilloux"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="smart-mirror"><meta property="article:tag" content="miroir"><meta property="article:tag" content="intelligent"><meta property="article:tag" content="diy"><meta property="article:published_time" content="2017-07-10T00:00:00+00:00"><meta property="article:modified_time" content="2017-07-10T00:00:00+00:00"><meta property="og:image" content="https://nicolasguilloux.eu/articles/mirint-v1/cover.jpg"><meta name=twitter:title content="Mirint"><meta name=twitter:description content="Un miroir intelligent"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://nicolasguilloux.eu/articles/mirint-v1/cover.jpg"><link rel="shortcut icon" href=images/favicon.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"dark")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Afficher le menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header class=site-info><figure class=site-avatar><img src=/images/avatar_hu33d8f2710ea4928d295bd08cdc05f6eb_143407_300x0_resize_q75_box.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar></figure><h1 class=site-name><a href=https://nicolasguilloux.eu>Nicolas Guilloux</a></h1><h2 class=site-description>DÃ©veloppeur Backend Symfony</h2></header><ol class=menu id=main-menu><li class=social><a href=mailto:nicolas.guilloux@protonmail.com target=_blank title=Email><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="at" class="svg-inline--fa fa-at fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 8C118.941 8 8 118.919 8 256c0 137.059 110.919 248 248 248 48.154.0 95.342-14.14 135.408-40.223 12.005-7.815 14.625-24.288 5.552-35.372l-10.177-12.433c-7.671-9.371-21.179-11.667-31.373-5.129C325.92 429.757 291.314 440 256 440c-101.458.0-184-82.542-184-184S154.542 72 256 72c100.139.0 184 57.619 184 160 0 38.786-21.093 79.742-58.17 83.693-17.349-.454-16.91-12.857-13.476-30.024l23.433-121.11C394.653 149.75 383.308 136 368.225 136h-44.981a13.518 13.518.0 00-13.432 11.993l-.01.092c-14.697-17.901-40.448-21.775-59.971-21.775-74.58.0-137.831 62.234-137.831 151.46.0 65.303 36.785 105.87 96 105.87 26.984.0 57.369-15.637 74.991-38.333 9.522 34.104 40.613 34.103 70.71 34.103C462.609 379.41 504 307.798 504 232 504 95.653 394.023 8 256 8zm-21.68 304.43c-22.249.0-36.07-15.623-36.07-40.771.0-44.993 30.779-72.729 58.63-72.729 22.292.0 35.601 15.241 35.601 40.77.0 45.061-33.875 72.73-58.161 72.73z"/></svg></a><a href=https://github.com/NicolasGuilloux target=_blank title=Github><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></a><a href=https://gitlab.com/NicolasGuilloux target=_blank title=Gitlab><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="gitlab" class="svg-inline--fa fa-gitlab fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M105.2 24.9c-3.1-8.9-15.7-8.9-18.9.0L29.8 199.7h132c-.1.0-56.6-174.8-56.6-174.8zM.9 287.7c-2.6 8 .3 16.9 7.1 22l247.9 184-226.2-294zm160.8-88 94.3 294 94.3-294zm349.4 88-28.8-88-226.3 294 247.9-184c6.9-5.1 9.7-14 7.2-22zM425.7 24.9c-3.1-8.9-15.7-8.9-18.9.0l-56.6 174.8h132z"/></svg></a><a href=https://www.malt.fr/profile/nicolasguilloux target=_blank title=Malt><svg xmlns="http://www.w3.org/2000/svg" width="186.795" height="186.795" viewbox="0 0 186.795 186.795" fill="none" id="svg28"><defs id="defs32"/><path d="m159.852 26.953c-14.1-14.1-29.162-4.974-38.588 4.452L32.22 120.452c-9.426 9.425-19.292 23.746-4.452 38.584 14.84 14.843 29.161 4.975 38.585-4.451L155.399 65.54c9.426-9.427 18.552-24.489 4.453-38.587z" fill="currentcolor" id="path2"/><path d="M74.78 23.306 93.635 42.16l19.192-19.192c1.303-1.306 2.626-2.518 3.957-3.661C114.774 9.167 108.988.0 93.626.0 78.235.0 72.456 9.203 70.457 19.365c1.437 1.243 2.871 2.489 4.323 3.941z" fill="currentcolor" id="path4"/><path d="m112.816 163.359-19.18-19.181-18.845 18.843c-1.431 1.432-2.855 2.74-4.273 3.969 2.161 10.337 8.277 19.805 23.11 19.805 14.872.0 20.98-9.519 23.127-19.889-1.319-1.135-2.639-2.248-3.939-3.547z" fill="currentcolor" id="path6"/><path d="M66.783 69.013H30.433C17.105 69.013.0 73.212.0 93.15c0 14.877 9.522 20.986 19.894 23.132 1.228-1.418 46.889-47.269 46.889-47.269z" fill="currentcolor" id="path8"/><path d="m167.435 69.981c-1.15 1.338-46.907 47.305-46.907 47.305h35.834c13.329.0 30.433-3.149 30.433-24.136.0-15.389-9.2-21.171-19.36-23.169z" fill="currentcolor" id="path10"/><path d="M78.693 57.081l6.494-6.494L66.344 31.741C56.917 22.316 42.598 12.449 27.758 27.289 16.876 38.171 19.293 48.762 25.065 57.36 26.823 57.23 78.693 57.081 78.693 57.081z" fill="currentcolor" id="path12"/><path d="m108.571 129.218-6.511 6.511 19.194 19.192c9.426 9.427 24.488 18.551 38.586 4.453 10.52-10.521 8.106-21.571 2.29-30.423-1.872.135-53.559.267-53.559.267z" fill="currentcolor" id="path14"/></svg></a><a href=https://www.linkedin.com/in/nicolas-guilloux/ target=_blank title=LinkedIn><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg></a><a href=https://drive.google.com/file/d/0B1PcOYDQ5VxbX1B6ZVhfZWp0S0E/view target=_blank title=CV><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="id-card" class="svg-inline--fa fa-id-card fa-w-18" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentcolor" d="M528 32H48C21.5 32 0 53.5.0 80v16h576V80c0-26.5-21.5-48-48-48zM0 432c0 26.5 21.5 48 48 48h480c26.5.0 48-21.5 48-48V128H0v304zm352-232c0-4.4 3.6-8 8-8h144c4.4.0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4.0-8-3.6-8-8v-16zm0 64c0-4.4 3.6-8 8-8h144c4.4.0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4.0-8-3.6-8-8v-16zm0 64c0-4.4 3.6-8 8-8h144c4.4.0 8 3.6 8 8v16c0 4.4-3.6 8-8 8H360c-4.4.0-8-3.6-8-8v-16zM176 192c35.3.0 64 28.7 64 64s-28.7 64-64 64-64-28.7-64-64 28.7-64 64-64zM67.1 396.2C75.5 370.5 99.6 352 128 352h8.2c12.3 5.1 25.7 8 39.8 8s27.6-2.9 39.8-8h8.2c28.4.0 52.5 18.5 60.9 44.2 3.2 9.9-5.2 19.8-15.6 19.8H82.7c-10.4.0-18.8-10-15.6-19.8z"/></svg></a><style>#main-menu li.social svg{margin:auto}#main-menu li.social a{margin-left:1em}#main-menu li.social a:first-child{margin-left:0}</style></li><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Accueil</span></a></li><li><a href=/recherche/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Recherche</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/a-propos/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>A propos</span></a></li><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Mode Sombre</span></li></ol></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/articles/mirint-v1/><img src=/articles/mirint-v1/cover_hu98ba8fe3a3318e23b8dc99810e3a1255_71397_800x0_resize_q75_box.jpg srcset="/articles/mirint-v1/cover_hu98ba8fe3a3318e23b8dc99810e3a1255_71397_800x0_resize_q75_box.jpg 800w, /articles/mirint-v1/cover_hu98ba8fe3a3318e23b8dc99810e3a1255_71397_1600x0_resize_q75_box.jpg 1600w" width=800 height=326 loading=lazy alt="Featured image of post Mirint"></a></div><div class=article-details><header class=article-category><a href=/categories/projets/ style=background-color:#2a9d8f;color:#fff>Projets</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/articles/mirint-v1/>Mirint</a></h2><h3 class=article-subtitle>Un miroir intelligent</h3></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>10 July 2017</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>7 minutes de lecture</time></div></footer></div></header><section class=article-content><div class=paragraph><p>Le miroir intelligent est une petite interface qui devrait, le matin et le soir (ou Ã  vrai dire, Ã  chaque fois que vous allez dans la salle de bain), vous donner des informations pertinentes.</p></div><div class=paragraph><p>Le but est de se dispenser de vÃ©rifier son Smartphone en affichant les choses Ã  faire dans la journÃ©e, la mÃ©tÃ©o et quelques news. Et dans un soucis dâergonomie, pas besoin dâun bouton pour lâactiver : un capteur de proximitÃ© se chargera de le rÃ©veiller quand vous le regardez.</p></div><div class=paragraph><p>Pour lâinstant, le projet nâen est quâÃ  un stade de prototype non fini. Il nâest toutefois pas abandonnÃ©.
AprÃ¨s lâachÃ¨vement des premiÃ¨res fonctionnalitÃ©s, le travail suivant sera dâimplÃ©menter une reconnaissance vocale.</p></div><div class=sect1><h2 id=_matÃ©riel>MatÃ©riel</h2><div class=sectionbody><div class=paragraph><p>Mirint regroupe diffÃ©rents appareils "recyclÃ©s" : ils ne servaient plus, donc je me suis servi.</p></div><div class=ulist><ul><li><p>Ecran de tÃ©lÃ©vision LCD</p></li><li><p>Raspberry Pi 2 et son alimentation</p></li><li><p>CÃ¢ble HDMI</p></li><li><p>Un coffret</p></li><li><p>Un film miroir sans teint</p></li><li><p>Une plaque de plexiglas</p></li><li><p>Du fil et de quoi souder</p></li></ul></div><div class=paragraph><p>La premiÃ¨re Ã©tape a Ã©tÃ© de dÃ©pioter le tÃ©lÃ©viseur. Afin que le miroir soit le plus fin possible, il faut enlever toute la partie protection plastique pour ne garder que la dalle et les circuits du tÃ©lÃ©viseur qui se divisent souvent en deux parties : un circuit dâalimentation oÃ¹ on relit lâappareil au secteur et un circuit dâentrÃ©es/sorties oÃ¹ vous branchez HDMI etc.</p></div><div class=paragraph><p>Il est important de <strong>ne pas toucher le circuit dâalimentation</strong> quand le systÃ¨me est sous tension ! Il y a risque dâÃ©lectrisation voire Ã©lectrocution !</p></div><div class=paragraph><p><span class=image><img src=tele_dessus.jpg alt="Vue de dessus"></span></p></div><div class=paragraph><p>Le Raspberry Pi est reliÃ© donc en HDMI au tÃ©lÃ©viseur. On pourrait auto-alimenter le RPi grÃ¢ce au port USB du tÃ©lÃ©viseur, mais il sera tributaire de sa puissance. De plus, si le tÃ©lÃ©viseur est Ã©teint, il y a de grandes chances que sur la plus part des tÃ©lÃ©viseur, le port USB soit dÃ©sactivÃ©. On opte donc pour une alimentation sÃ©parÃ©e.</p></div><div class=paragraph><p>Le coffret a Ã©tÃ© rabotÃ© afin de pouvoir placer le tÃ©lÃ©viseur sur ses rebords et donc avoir la dalle sur le mÃªme plan horizontal que les bords du coffret. Il faudra aussi faire en sorte que ces mÃªmes bords ainsi que ceux du tÃ©lÃ©viseur soient noirs (peinture ou scotch noir).</p></div><div class=paragraph><p><span class=image><img src=tele_dos.jpg alt="Dos de la tÃ©lÃ©"></span></p></div><div class=paragraph><p>La plaque de plexiglas a Ã©tÃ© dÃ©coupÃ©e avec les dimensions extÃ©rieures du coffret afin quâelle couvre toute la surface.</p></div><div class=paragraph><p>Le film miroir a Ã©tÃ© collÃ© sur la surface qui sera vers lâintÃ©rieur du coffret afin dâÃ©viter toute dÃ©gradation et rentrÃ©e de lumiÃ¨re. Pour le mettre en place :</p></div><div class="olist arabic"><ol class=arabic><li><p>Bien laver le plexiglas,</p></li><li><p>Mettre de lâeau savoneuse sur la surface Ã  coller,</p></li><li><p>Enlever le film protecteur du revÃªtement miroir,</p></li><li><p>Placer le film progressivement sur la surface en raclant avec une carte afin de chasser les bulles dâair</p></li><li><p>Une fois placÃ© et bien sechÃ©, couper lâexcÃ©dent de film</p></li></ol></div><div class=paragraph><p>Pour ma part, jâai percÃ© puis fraisÃ© le plexiglas pour le visser sur le coffret.</p></div><div class=paragraph><p>Par ailleurs, on veut pouvoir allumer le tÃ©lÃ©viseur sans appuyer physiquement sur le bouton "Allumer" car Ã§a contraint Ã  dÃ©monter le miroir Ã  chaque fois. Ainsi, on regarde la tension appliquÃ©e aux bornes de ce bouton poussoir. GÃ©nÃ©ralement, il y a 4 pattes donc pour peut vÃ©rifier avec deux bornes en diagonale.</p></div><div class=paragraph><p><span class=image><img src=btn_power.jpg alt=Boutons></span></p></div><div class=paragraph><p>Une fois trouvÃ© (pour ma part 3,3V), on soude deux fils : un qui ira Ã  la masse du Raspberry Pi et lâautre Ã  un de ses nombreux GPIO, jâai choisi le nÂ°7. Pour voir la partie logicielle, rendez vous un peu plus bas au paragraphe "ContrÃ´le du tÃ©lÃ©viseur".</p></div></div></div><div class=sect1><h2 id=_logiciel>Logiciel</h2><div class=sectionbody><div class=paragraph><p><strong>La partie logicielle est obsolÃ¨te, puisque maintenant il y a <a href=https://magicmirror.builders/ target=_blank rel=noopener>MagicMirror</a> qui propose de faire tout ce que jâai pu proposer.</strong></p></div><div class=paragraph><p>Dans un premier temps, veillez Ã  bien configurer votre tÃ©lÃ©viseur pour sâallumer lorsque quâon le branche et de choisir la source HDMI par dÃ©faut. Vous pouvez aussi configurer la profondeur du noir : plus il sera profond plus le rendu sera de qualitÃ©.</p></div><div class=paragraph><p>De plus, vous pouvez configurer le tÃ©lÃ©viseur pour ne pas sâÃ©teindre. Une amÃ©lioration sera Ã  prÃ©voir pour Ã©conomiser de lâÃ©nergie.</p></div><div class=paragraph><p>Venons au Raspberry qui sera le cerveau de notre miroir. Jâai choisi de faire lâaffichage en HTML sur un serveur Web qui sera pour ma part plus facile Ã  maintenir. Toutefois, avant parler du coeur du projet, il faut configurer notre Raspberry. Je me suis basÃ© sur lâOS Raspbian Jessie Lite. Je pars du principe que les pÃ©riphÃ©riques branchÃ©s fonctionnent correctement (comme la carte WiFi de votre RPi).</p></div><div class=sect2><h3 id=_connexion_au_wifi>Connexion au Wifi</h3><div class=paragraph><p>CommenÃ§ons par chercher le SSID de votre rÃ©seau (son petit nom en fait) en scannant ce que le RPi reÃ§oit : <code>sudo iwlist wlan0 scan</code>. Cherchez le SSID de votre rÃ©seau et notez le dans un coin de votre tÃªte.</p></div><div class=paragraph><p>On va maintenant modifier les paramÃ¨tres des rÃ©seaux WiFi <code>sudo nano /etc/wpa_supplicant/wpa_supplicant.conf</code> puis rentrez les informations comme suit Ã  la fin du fichier (ou dans le champ correspondant sâil existe dÃ©jÃ  la variable) :</p></div><div class=listingblock><div class=content><pre class=highlight><code>network={
   ssid=&#34;votre SSID&#34;
   psk=&#34;votre mot de passe&#34;
}</code></pre></div></div><div class=paragraph><p>ATTENTION : Votre mot de passe est stockÃ© en clair.</p></div><div class=paragraph><p>Ensuite, on valide nos changements en effectuant ce petit bout de code : <code>sudo wpa_cli reconfigure</code></p></div><div class=paragraph><p>On aura besoin dâune interface graphique et de mettre Ã  jour le bousin. On installe donc un serveur X et on met Ã  jour le systÃ¨me (et un petit brin de mÃ©nage au cas ou) avec la ligne suivante :</p></div><div class=listingblock><div class=content><pre class=highlight><code>sudo apt-get update
sudo apt-get --no-install-recommends install xserver-xorg xserver-xorg-video-fbdev xinit pciutils xinput xfonts-100dpi xfonts-75dpi xfonts-scalable x11-xserver-utils unclutter
sudo apt-get dist-upgrade
sudo apt-get autoremove</code></pre></div></div></div><div class=sect2><h3 id=_paramÃ©trage_du_raspberry_pi>ParamÃ©trage du Raspberry Pi</h3><div class=paragraph><p>On va maintenant aller dans les configurations de base du RPi : <code>sudo raspi-config</code>. Cela vous amÃ¨nera sur lâinterface "graphique" suivante :</p></div><div class=paragraph><p><span class=image><img src=raspi-config.jpg alt="Raspi config"></span>]</p></div><div class=paragraph><p>On configure comme Ã§a nous plait en changeant le mot de passe et les options de localisation. On choisit ensuite le menu Interfacing Option pour activer le SSH afin de piloter le miroir Ã  distance.</p></div><div class=paragraph><p>Enfin, on appuie 2 fois sur Tab pour sÃ©lectionner "Finish" et on accepte de redÃ©marrer notre Raspberry Pi.</p></div></div><div class=sect2><h3 id=_rotation_de_lÃ©cran>Rotation de lâÃ©cran</h3><div class=paragraph><p>Une rotation de lâÃ©cran peut Ãªtre souhaitable suivant le sens de votre miroir. Il nous faut alors modifier un fichier en suivant cette commande : <code>sudo nano /boot/config.txt</code> et on y ajoute la ligne <code>display_rotate = 1</code></p></div><div class=paragraph><p>Voici les diffÃ©rentes options :</p></div><div class=ulist><ul><li><p>0 : Orientation normale</p></li><li><p>1 : 90 degrÃ©s</p></li><li><p>2 : 180 degrÃ©s</p></li><li><p>3 : 270 degrÃ©s</p></li></ul></div></div><div class=sect2><h3 id=_configuration_de_linterface_graphique>Configuration de lâinterface graphique</h3><div class=paragraph><p>Dâabord, on ajoute un nouvel utilisateur pour se connecter avec lors des connexions SSH. On lance la commande <code>sudo adduser NouvelUtilisateur</code>. On rÃ©pond gentillement Ã  tout ce quâil nous demande.</p></div><div class=paragraph><p>On souhaite maintenant charger juste un navigateur. Il faut donc choisir votre navigateur prÃ©fÃ©rÃ©, jâai choisi Chromium. Pour lâinstaller : <code>sudo apt-get install chromium-browser</code></p></div><div class=paragraph><p>Ensuite, pour lancer le navigateur en plein Ã©cran sur GitHub, il faut suivre la commande suivante :</p></div><div class=listingblock><div class=content><pre class=highlight><code>startx /usr/bin/chromium-browser https://github.com/ --window-size=1080,1920 --start-fullscreen --kiosk --incognito  -- -nocursor</code></pre></div></div><div class=paragraph><p>Il faut prendre garde Ã  lâorientation de lâÃ©cran et sa rÃ©solution. Pour ma part, je lâavais mis format portrait en full HD.</p></div><div class=paragraph><p>Pour lâajouter au dÃ©marrage, Ã©dite un fichier par la commande <code>nano ~/.bashrc</code> sous lâutilisateur "pi" et ajoute la commande.</p></div><div class=paragraph><p>Il faudra maintenant arrÃªter lâÃ©cran de veille en Ã©ditant le fichier lightdm.conf par la commande suivant <code>sudo nano /etc/lightdm/lightdm.conf</code> et on ajoute <code>xserver-command=X -s 0 dpms</code>.</p></div></div><div class=sect2><h3 id=_pilotage_Ã _distance>Pilotage Ã  distance</h3><div class=paragraph><p>Notre miroir nâa ni clavier, ni souris. Et rien nâest moins pratique que de contrÃ´ler le miroir par la pensÃ©e. On va donc se servir du protocole VNC qui va nous servir Ã  piloter lâinterface graphique Ã  distance, comme avec le SSH (ils peuvent dâailleurs Ãªtre liÃ©s). Pour cela, on installe x11vnc : <code>sudo apt-get install x11vnc</code>. Ensuite, on peut lancer 1 session avec <code>x11vnc -auth guess</code> une fois startx lancÃ© par SSH.</p></div></div><div class=sect2><h3 id=_contrÃ´le_du_tÃ©lÃ©viseur>ContrÃ´le du tÃ©lÃ©viseur</h3><div class="paragraph float-right"><p><span class=image><img src=gpio.png alt=GPIO></span></p></div><div class=paragraph><p>Cela dÃ©coule directement du soudage du bouton. Dans un premier, on installe WiringPi en suivant les instructions de ce <a href=http://wiringpi.com/download-and-install/>lien</a>. Cela nous permettra dâutiliser facilement les GPIO ! Pour plus dâinformations, je vous laisse checker le <a href=http://blog.idleman.fr/raspberry-pi-06-utiliser-le-gpio-et-interagir-avec-le-monde-reel/>blog dâIdleman</a>.</p></div><div class=paragraph><p>Une fois installÃ©, on peut commencer les festivitÃ©s. On paramÃ¨tre dâabord le GPIO pour Ãªtre en mode "out" : <code>gpio mode 7 out</code>. Comme je lâai dis prÃ©cedemment, jâai choisi le GPIO 7 (en suivant le schÃ©ma joint). On peut ensuite piloter le port en utilisant <code>gpio write 7 bit</code> en remplaÃ§ant "bit" par 1 pour du 3,3V ou 0 pour du 0V.</p></div><div class=paragraph><p>On peut voir que le bouton rÃ©agit par front descendant en sâamusant Ã  changer ces valeurs (donc pour simuler le bouton appuyÃ©, on place le GPIO Ã  0).</p></div><div class=paragraph><p>Ainsi, pour simuler lâappui du bouton, on utilise la ligne suivante :</p></div><div class=listingblock><div class=content><pre class=highlight><code>gpio write 7 0 &amp;&amp; sleep 1 &amp;&amp; gpio write 7 1</code></pre></div></div><div class=paragraph><p>Pour paramÃ©trer le GPIO en mode out et Ã  lâÃ©tat 1 (repos du bouton), il nous faut Ã©diter le fichier /home/pi/.bashrc et rajouter les lignes suivantes :</p></div><div class=listingblock><div class=content><pre class=highlight><code>gpio mode 7 out
gpio write 7 1</code></pre></div></div><div class=paragraph><p>Ainsi Ã  chaque dÃ©marrage, on configure le GPIO 7 en mode Out et Ã  lâÃ©tat 1.</p></div></div></div></div></section><footer class=article-footer><section class=article-tags><a href=/tags/smart-mirror/>smart-mirror</a>
<a href=/tags/miroir/>miroir</a>
<a href=/tags/intelligent/>intelligent</a>
<a href=/tags/diy/>diy</a></section></footer></article><aside class=related-contents--wrapper><h2 class=section-title>Contenus liÃ©s</h2><div class=related-contents><div class="flex article-list--tile"><article class=has-image><a href=/articles/mirint-v2/><div class=article-image><img src=/articles/mirint-v2/screen.4d8c818f64114bacbc41af5c7998ccba_huf9b2fdd55abb6aac5426b60d01d0381a_176971_250x150_fill_q75_box_smart1.jpg width=250 height=150 loading=lazy alt="Featured image of post Mirint V2" data-key=mirint-v2 data-hash="md5-TYyBj2QRS6y8Qa9ceZjMug=="></div><div class=article-details><h2 class=article-title>Mirint V2</h2></div></a></article><article class=has-image><a href=/articles/douglas/><div class=article-image><img src=/articles/douglas/cover.36e11dc48b79225c336f7ff2d73eb67b_hu516228d592db0b9421f864dbb4b1650d_1516861_250x150_fill_box_smart1_3.png width=250 height=150 loading=lazy alt="Featured image of post Douglas" data-key=douglas data-hash="md5-NuEdxIt5Ilwzb3/y1z62ew=="></div><div class=article-details><h2 class=article-title>Douglas</h2></div></a></article></div></div></aside><div id=disqus-container class=disqus-container><h2 id=disqus-title class=article-title>Commentaires</h2><div id=disqus-container-dropdown><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//personalwebsite-6.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><style>.disqus-container{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}</style><script>window.addEventListener("onColorSchemeChange",e=>{DISQUS&&DISQUS.reset({reload:!0})})</script><script>document.getElementById("disqus-title").addEventListener("click",e=>{document.getElementById("disqus-container").classList.toggle("extended")})</script><footer class=site-footer><section class=copyright>&copy;
2018 -
2022 Nicolas Guilloux</section><section class=powerby></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>